(this["webpackJsonpfruits-app"]=this["webpackJsonpfruits-app"]||[]).push([[0],{171:function(e,t,n){},278:function(e,t,n){},282:function(e,t,n){},283:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(33),c=n.n(r),o=(n(170),n(171),n(309)),s=n(160),l=n(299),u=n(300),d=n(301),f=n(305),j=n(8),b=n(99),O=n(303),h=n(294),p=n(308),m=n(295),v=n(296),S=n(297),x=n(298),g="ADD_FRUIT_ACTION",E="DELETE_FRUIT_ACTION",_="FRUITS_LOADED",T="FRUITS_LOADED_FAILED",F=[{value:"please choose",label:"Please Choose as season",disabled:!1},{value:"spring",label:"Spring",disabled:!1},{value:"summer",label:"Summer",disabled:!1},{value:"fall",label:"Fall",disabled:!1},{value:"winter",label:"Winter",disabled:!1},{value:"any",label:"Any",disabled:!1}],C=n(5),A=function(e){var t=e.dispatch,n=a.useState(""),i=Object(j.a)(n,2),r=i[0],c=i[1],o=a.useState(""),s=Object(j.a)(o,2),l=s[0],u=s[1],d=a.useState(),E=Object(j.a)(d,2),_=E[0],T=E[1],A=a.useState(!1),y=Object(j.a)(A,2),L=y[0],D=y[1],P=a.useState("You must fill out all required fields before you can proceed."),R=Object(j.a)(P,2),I=R[0],N=R[1],k=function(){D(!1),c(""),u(""),T((function(e){return!e}))};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(b.a,{variant:"primary",onClick:k,children:"Add Fruits"}),Object(C.jsx)(O.a,{title:"Add Fruits",variant:O.b.medium,isOpen:_,onClose:k,actions:[Object(C.jsx)(b.a,{variant:"primary",onClick:function(){console.log(r,l);var e={name:r,season:l};if(r&&l){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST,"/api/fruit"),n).then((function(e){console.log(e),t({type:g,payload:{cells:[{title:r},{title:l},{title:"delete",fruitname:l}]}}),D((function(e){return!e})),T((function(e){return!e})),c(""),u("")})).catch((function(e){console.log(e),D((function(e){return!e})),N("".concat(e.status," - ").concat(e.errorText))}))}else D((function(e){return!e}))},children:"Confirm"},"confirm"),Object(C.jsx)(b.a,{variant:"link",onClick:k,children:"Cancel"},"cancel")],children:Object(C.jsxs)(h.a,{children:[Object(C.jsx)(p.a,{label:"Name",isRequired:!0,fieldId:"simple-form-fruit",children:Object(C.jsx)(m.a,{isRequired:!0,id:"simple-form-fruit",type:"text",placeholder:"Enter Fruit Name",name:"simple-form-fruit",value:r,"aria-label":"Fruit Name",onChange:function(e){return c(e)}})}),Object(C.jsx)(p.a,{label:"Season",isRequired:!0,fieldId:"simple-form-season",children:Object(C.jsx)(v.a,{isRequired:!0,id:"simple-form-season",placeholder:"Enter Fruit Season",name:"simple-form-season",value:l,"aria-label":"Fruit Season",onChange:function(e){return"please choose"!==e?u(e):D((function(e){return!e}))},children:F.map((function(e,t){return Object(C.jsx)(S.a,{isDisabled:e.disabled,value:e.value,label:e.label},t)}))})}),L&&Object(C.jsx)(x.a,{children:Object(C.jsx)(f.a,{variant:"danger",title:I,"aria-live":"polite",isInline:!0})})]})})]})},y=n(118),L=n.n(y),D=n(154),P=n(6),R=function(e,t){switch(t.type){case _:return{fruitsList:[].concat(Object(P.a)(e.fruitsList),Object(P.a)(t.payload)),loaded:!0};case T:return{fruitsList:Object(P.a)(e.fruitsList),loaded:!0,loadError:t.payload.loadError};case g:return{fruitsList:[].concat(Object(P.a)(e.fruitsList),[t.payload]),loaded:!0};case E:return{fruitsList:e.fruitsList.length?e.fruitsList.filter((function(e){var n,a;return(null===(n=e.cells)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.title)!==t.payload.name})):[],loaded:!0};default:return e}},I=i.a.createContext({}),N=function(e){var t=i.a.useReducer(R,{fruitsList:[],loaded:!1}),n=Object(j.a)(t,2),a=n[0],r=n[1],c=function(e){var t=F.find((function(t){return t.value===e}));return null===t||void 0===t?void 0:t.label};i.a.useEffect((function(){fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST,"/api/fruits")).then(function(){var e=Object(D.a)(L.a.mark((function e(t){var n,a,i;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:n=e.sent,t.ok?(console.log("Fruits Data %s",JSON.stringify(n)),a=n.map((function(e){return{cells:[{title:e.name},{title:c(e.season)},{title:"delete",fruitname:e.name}]}})),r({type:_,payload:a})):(console.log("Error %s",JSON.stringify(n)),i={},500===n.status?(i.loaded=!0,i.loadError="Some Error occured fetching the fruits"):(i.loaded=!0,i.loadError="".concat(n.status," ").concat(n.message)),r({type:T,payload:i}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("Error Retriving Fruits: %s",e)}))}),[]);var o={state:a,dispatch:r};return Object(C.jsx)(I.Provider,{value:o,children:e.children})},k=n(302),H=n(307),w=n(304),W=[{title:"Name"},{title:"Season"},{title:"Action"}],U=function(e){var t=e.loaded,n=e.fruitsList,a=e.dispatch;return Object(C.jsx)(C.Fragment,{children:t?Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(k.a,{"aria-label":"Automated pagination table",cells:W,rows:n,rowWrapper:function(e){return console.log(e),Object(C.jsx)("tr",{children:e.row.cells.map((function(e,t){return Object(C.jsx)("td",{"data-label":W[t].title,children:"delete"===e.title?Object(C.jsx)("button",{onClick:function(t){return function(e,t){console.log(e,t),t.fruitname&&fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST,"/api/fruit/").concat(t.fruitname),{method:"DELETE"}).then((function(e){console.log(e),a({type:E,payload:{name:t.fruitname}})})).catch((function(e){console.log(e)}))}(t,e)},children:"Delete"}):e.title},e.title)}))})},children:[Object(C.jsx)(H.a,{}),Object(C.jsx)(w.a,{})]})}):Object(C.jsx)("h1",{children:"Loading...."})})},K=(n(278),function(){var e=i.a.useContext(I),t=e.state,n=t.fruitsList,a=t.loaded,r=t.loadError,c=e.dispatch;return r?Object(C.jsx)(f.a,{style:{marginTop:0},variant:"danger",isInline:!0,title:r}):a?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(A,{dispatch:c}),Object(C.jsx)(U,{loaded:a,fruitsList:n,dispatch:c})]}):Object(C.jsx)("h1",{children:"Loading...."})});var q=function(){var e=Object(C.jsx)(o.a,{style:{background:"#000",color:"#fff"},logo:Object(C.jsx)("h1",{children:"Fruits App"}),logoProps:{href:"https://github.com/kameshsampath/rosa-fruits-app",title:"Quarkus::Fruits API",target:"_blank"},children:" Fruits App "});return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(s.a,{header:e,isManagedSidebar:!0,children:Object(C.jsx)(l.a,{variant:l.b.light,children:Object(C.jsxs)(u.a,{children:[Object(C.jsx)(d.a,{component:"h1",children:"Show Fruits"}),Object(C.jsx)(d.a,{component:"p",children:"List the Fruits and season they are available in, can Add or remove fruits as well."}),Object(C.jsx)(N,{children:Object(C.jsx)(K,{})})]})})})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,310)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),r(e),c(e)}))};n(282);c.a.render(Object(C.jsx)(i.a.StrictMode,{children:Object(C.jsx)(q,{})}),document.getElementById("root")),B()}},[[283,1,2]]]);
//# sourceMappingURL=main.b5c13eac.chunk.js.map